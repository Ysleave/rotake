<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
     *{
         margin: 0;
         padding: 0;
         list-style: none;
     }
     .wrapper{
         width: 400px;
         height: 250px;
         margin: 100px auto 0px;
         border: 1px solid black;
         overflow: hidden;
         position: relative;
     }
     .wrapper .slidePage{
         position: absolute;
         width: 2000px;
         left: 0;
     }
     .wrapper .slidePage li{
         width: 400px;
         height: 250px;
         float: left;
     }
     .wrapper .slidePage li img{
         width: 100%;
         height: 100%;
     }
    .wrapper .btn{
        display: inline-block;
        position: absolute;
        width: 40px;
        height: 40px;
        top: 50%;
        margin-top: -20px;
        text-align: center;
        line-height: 40px;
        background: black;
        color: #ffffff;
        opacity: 0.6;
        cursor: pointer;
        display: none;
    }
    /* .wrapper:hover .btn{
        opacity: 0.7;
    } */
    .wrapper .leftBtn{
         left: 15px;
    }
    .wrapper .rightBtn{
        right: 15px;
    }
    .indexPage{
        position: absolute;
        width: 100%;
        bottom: 15px;
        text-align: center;
    }
    .indexPage span{
        width: 8px;
        height: 8px;
        display: inline-block;
        background-color: #ccc;
        border-radius: 50%;
        margin-right: 5px;
        cursor: pointer;
    }
   .indexPage .active{
        background-color: #f40;
    }
    </style>
</head>
<body>
    <div class="wrapper">
            <ul class="slidePage">
                <li><img src="./img/0.jpg" alt=""></li>
                <li><img src="./img/1.jpg" alt=""></li>
                <li><img src="./img/2.jpg" alt=""></li>
                <li><img src="./img/3.jpg" alt=""></li>
                <li><img src="./img/0.jpg" alt=""></li>
            </ul>
        <div class="btn leftBtn">&lt;</div>
        <div class="btn rightBtn">&gt;</div>
        <div class="indexPage">
            <span class="active"></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
    <script src="./jquery-3.3.1.js"></script>
    <script>
         var index = 0;
         var width = $('.wrapper .slidePage li').width();
         var num = $('.wrapper .slidePage li').length - 1;
         var lock = false;
         var timer = null;
         function init() {
             bindevent()
             automove()
             change(index)
         }
         function bindevent() {
             $('.wrapper').hover(function(){
                   $('.wrapper .btn').fadeIn()
                   clearInterval(timer)
             },function(){
                   $('.wrapper .btn').fadeOut()
                   automove()
             })
             $('.wrapper').on('click', '.btn', function(e){
                 if($(this).hasClass('leftBtn')){
                     move('perv');
                 }else if($(this).hasClass('rightBtn')){
                    move('next');
                 }
             })
             $('.wrapper > .indexPage').on('click','span',function(e){
                 console.log($(this).index())
                 move($(this).index())
             })

         }
         function move(dir) {
             if(lock) {
                 return false
             }
             lock = true;
             if(dir == 'perv') {
                 if(index == 0){
                     index = num;
                     $('.wrapper > ul').css({'left':- index * width})
                 }
                 index --;
                 $('.wrapper ul').animate({
                     'left' : -index * width
                      }, 1000,function(){
                        change(index)
                        lock = false;
                 })
             }else if(dir == 'next'){
                if(dir == 'next'){
                 if(index == num){
                     index=0;
                     $('.wrapper > ul').css({'left': - index * width})
                 }
                 index ++;
                 $('.wrapper ul').animate({
                     'left' : -index * width
                      }, 1000,function(){
                        // console.log(index)
                        change(index)
                        lock = false;
                 })
             }
         }else if(typeof dir == 'number'){
             index = dir;
             $('.wrapper ul').animate({
                     'left' : -index * width
                      }, 1000,function(){
                        // console.log(index)
                        change(index)
                        lock = false;
                 })
         }
    }
         function automove() {
             timer = setInterval(function(){
                 move('next')
             },1500)

         }
         function change(_index){
            if(_index == num){
                $('.wrapper .indexPage').children().removeClass('active').eq(0).addClass('active')
            }else{
                $('.wrapper .indexPage').children().removeClass('active').eq(_index).addClass('active')
            }
           

         }
         init()



    </script>
   
</body>
</html>